<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="shortcut icon" href="favicon.ico" />
    <script defer src="./js/script.js"></script>
    <title>Homework_03+ task-5</title>
  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <h1>Домашнє завдання №3 (додатково)</h1>
      </header>
      <main class="page">
        <div class="page__results">
          <div class="page__task task">
            <a href="index.html" class="task__button">повернутися на головну</a>
            <h3 class="task__title">Додаткова задача №5</h3>
            <div class="task__text">
              <p>
                Морський бій. Ворожий корабель, може знаходитись в одному із
                квадратів (кількість квадратів вводиться з клавіатури), які
                розташовані лінійно (один за одним) на річці. Позиція корабля
                визначається комп’ютером випадковим чином. Гра відбувається за
                правилами:
              </p>
              <ul>
                <li>
                  1) якщо користувач стріляє у заданий квадрат (тобто вводиться
                  номер квадрата), то корабель потоплено;
                </li>
                <li>
                  2) якщо корабель знаходиться у сусідньому по відношенню до
                  квадрата, де знаходиться корабель, то корабель пошкоджено (про
                  це повідомляємо користувача).
                </li>
              </ul>
              <p>За два постріли спробувати потопити корабель.</p>
              <p>
                Модифікувати попередню задачу з можливістю після пострілу
                переміщення корабля у випадковим чином вибрану сусідню клітинку
                (якщо звичайно корабель не було потоплено за першим разом).
              </p>
            </div>
            <script>
              "use strict";
              let numberOfСells = parseInt(
                prompt(
                  `Введіть кількість квадратів для гри (від 4 до 6), де 4 - легкий рівень, 5 - середній рівень і 6 - складний рівень`,
                  5
                )
              );
              const MIN_NUMBER = 1;
              const MAX_NUMBER = numberOfСells;
              let cellWithShip =
                MIN_NUMBER +
                Math.floor(Math.random() * (MAX_NUMBER - MIN_NUMBER + 1));
              let newCellWithShip;
              let firstShotCell = parseInt(
                prompt(
                  `Введіть номер квадрата по якому буде завдано удар (від 1 до ${numberOfСells})`,
                  2
                )
              );
              let secondShotCell;
              if (
                numberOfСells >= 4 &&
                numberOfСells <= 6 &&
                firstShotCell >= 1 &&
                firstShotCell <= numberOfСells
              ) {
                if (firstShotCell === cellWithShip) {
                  document.write(`
                  <div class="result">
                   <div class="result__text">
                  Попадання з першого пострілу. Корабель потоплено!
                   </div>
                   <div class="result__image">
                  <img src="./img/ship.jpg" alt="Image" />
                 </div>
              </div>
                  `);
                } else if (Math.abs(cellWithShip - firstShotCell) === 1) {
                  secondShotCell = parseInt(
                    prompt(
                      `Ви пошкодити корабель. Є ще одна спроба щоб потопити його, але корабель може змінити квадрат на сусідній від нього. Куди б'ємо?`,
                      2
                    )
                  );
                  let minValueNewCellWithSip = firstShotCell - 1;
                  let maxValueNewCellWithSip = firstShotCell + 1;
                  if (minValueNewCellWithSip < 1) {
                    firstShotCell = 1;
                  }
                  if (maxValueNewCellWithSip > numberOfСells) {
                    firstShotCell = numberOfСells;
                  }
                  newCellWithShip =
                    minValueNewCellWithSip +
                    Math.floor(
                      Math.random() *
                        (maxValueNewCellWithSip - minValueNewCellWithSip + 1)
                    );

                  if (secondShotCell >= 1 && secondShotCell <= numberOfСells) {
                    if (secondShotCell === newCellWithShip) {
                      document.write(`
                  <div class="result">
                   <div class="result__text">
                  Попадання! Корабель потоплено!
                   </div>
                   <div class="result__image">
                  <img src="./img/ship.jpg" alt="Image" />
                 </div>
              </div>
                  `);
                    } else {
                      document.write(`
                  <div class="result">
                   <div class="result__text">
                 Промах. Не переймайтеся! Оновіть сторінку та потопіть той клятий корабель!
                   </div>
              </div>
                  `);
                    }
                  } else {
                    document.write(`
                  <div class="result">
                   <div class="result__text">
                  Ви ввели некоректні дані. Оновіть сторінку та спробуйте ще раз.
                   </div>
              </div>
                  `);
                  }
                } else {
                  document.write(`
                  <div class="result">
                   <div class="result__text">
                 Промах. Не переймайтеся! Оновіть сторінку та потопіть той клятий корабель!
                   </div>
              </div>
                  `);
                }
              } else {
                document.write(`
                  <div class="result">
                   <div class="result__text">
                  Ви ввели некоректні дані. Оновіть сторінку та спробуйте ще раз.
                   </div>
              </div>
                  `);
              }
            </script>
          </div>
        </div>
      </main>
      <footer class="footer">
        <span>Курс JS 2023</span>
        <span>виконав Мусієнко Руслан</span>
      </footer>
    </div>
  </body>
</html>
